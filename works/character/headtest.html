<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Head Study - 3D Artist Portfolio</title>
    <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
    <link rel="stylesheet" href="../../style.css">
    <style>
        /* Additional styles for project page */
        .project-hero {
            padding: 60px 0 40px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        }

        .project-title {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .project-meta {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .meta-value {
            font-size: 16px;
            color: var(--text);
            font-weight: 600;
        }

        .project-content {
            padding: 60px 0;
        }

        .project-section {
            margin-bottom: 60px;
        }

        .section-title {
            font-size: 32px;
            margin-bottom: 30px;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .gallery-item {
            aspect-ratio: 16/9;
            overflow: hidden;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
            user-select: none;
        }

        .project-description {
            font-size: 18px;
            line-height: 1.8;
            color: var(--text-secondary);
            max-width: 800px;
        }

        /* 3D Viewer Section */
        .viewer-section {
            padding: 60px 0;
            background: var(--surface);
        }

        .viewer-container {
            position: relative;
            width: 100%;
            height: 700px;
            background: var(--background);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        #canvas-container {
            width: 100%;
            height: 100%;
        }

        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
            z-index: 10;
        }

        .loader {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .viewer-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            z-index: 5;
        }

        .viewer-controls h3 {
            font-size: 14px;
            margin-bottom: 15px;
            color: var(--text-secondary);
        }

        .control-btn {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .control-btn.active {
            background: rgba(99, 102, 241, 0.3);
            border-color: rgba(99, 102, 241, 0.5);
        }

        .viewer-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
            font-size: 12px;
            color: var(--text-secondary);
            z-index: 5;
        }

        @media (max-width: 768px) {
            .project-title {
                font-size: 32px;
            }

            .viewer-container {
                height: 500px;
            }

            .viewer-controls {
                top: 10px;
                right: 10px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <button class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <a href="../../index.html" class="nav-brand">mondupark</a>
            <ul class="nav-menu">
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../../works.html">Personal Works</a></li>
                <li><a href="../../projects.html">Projects</a></li>
                <li><a href="../../about.html">About</a></li>
                <li><a href="../../contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>
    <!-- Mobile Sidebar -->
    <div class="mobile-sidebar">
        <button class="mobile-close-btn" aria-label="Close menu"></button>
        <ul class="nav-menu">
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../../works.html">Personal Works</a></li>
            <li><a href="../../projects.html">Projects</a></li>
            <li><a href="../../about.html">About</a></li>
            <li><a href="../../contact.html">Contact</a></li>
        </ul>
    </div>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay"></div>

    <section class="project-hero">
        <div class="container">
            <h1 class="project-title gradient-text">Head Study</h1>
            <p style="font-size: 18px; color: var(--text-secondary);">Realistic human head modeling and texturing</p>

            <div class="project-meta">
                <div class="meta-item">
                    <span class="meta-label">Year</span>
                    <span class="meta-value">2024</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Category</span>
                    <span class="meta-value">Character Art</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Software</span>
                    <span class="meta-value">ZBrush, Substance Painter, Blender</span>
                </div>
                <div class="meta-item">
                    <span class="meta-label">Duration</span>
                    <span class="meta-value">3 Weeks</span>
                </div>
            </div>
        </div>
    </section>

    <section class="project-content">
        <div class="container">
            <div class="project-section">
                <h2 class="section-title">Project Overview</h2>
                <p class="project-description">
                    This project focuses on creating a realistic human head model with detailed sculpting and texturing.
                    The goal was to achieve photorealistic skin textures and anatomically correct proportions while maintaining
                    good topology for animation purposes. The model was sculpted in ZBrush, retopologized in Blender,
                    and textured using Substance Painter with physically-based rendering materials.
                </p>
            </div>

            <div class="project-section">
                <h2 class="section-title">Gallery</h2>
                <div class="image-gallery">
                    <div class="gallery-item">
                        <img src="https://placehold.co/800x450/1e1e1e/6366f1?text=Front+View" alt="Front View">
                    </div>
                    <div class="gallery-item">
                        <img src="https://placehold.co/800x450/1e1e1e/8b5cf6?text=Side+View" alt="Side View">
                    </div>
                    <div class="gallery-item">
                        <img src="https://placehold.co/800x450/1e1e1e/ec4899?text=Close+Up" alt="Close Up">
                    </div>
                    <div class="gallery-item">
                        <img src="https://placehold.co/800x450/1e1e1e/06b6d4?text=Wireframe" alt="Wireframe">
                    </div>
                </div>
            </div>

            <div class="project-section">
                <h2 class="section-title">Technical Details</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: var(--surface); padding: 20px; border-radius: 8px; border: 1px solid var(--border);">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Modeling</h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">High-poly sculpt in ZBrush with anatomical accuracy, retopologized for clean quad topology</p>
                    </div>
                    <div style="background: var(--surface); padding: 20px; border-radius: 8px; border: 1px solid var(--border);">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Texturing</h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">PBR textures created in Substance Painter including diffuse, normal, roughness, and SSS maps</p>
                    </div>
                    <div style="background: var(--surface); padding: 20px; border-radius: 8px; border: 1px solid var(--border);">
                        <h4 style="color: var(--primary); margin-bottom: 10px;">Rendering</h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">Real-time rendering optimized for web viewing with proper material setup</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="viewer-section">
        <div class="container">
            <h2 class="section-title">Interactive 3D Model</h2>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">
                Explore the model in 3D. Use your mouse to rotate, zoom, and pan the camera.
            </p>

            <div class="viewer-container">
                <div id="canvas-container"></div>

                <div id="loading">
                    <div class="loader"></div>
                    <p>Loading Model...</p>
                </div>

                <div class="viewer-controls">
                    <h3>Controls</h3>
                    <button class="control-btn" id="texture-btn">ðŸŽ¨ Toggle Texture</button>
                </div>

                <div class="viewer-info">
                    ðŸ’¡ Left-click: Rotate | Right-click: Pan | Scroll: Zoom
                </div>
            </div>
        </div>
    </section>

    <section style="padding: 60px 0;">
        <div class="container" style="text-align: center;">
            <h2 style="margin-bottom: 20px;">More Projects</h2>
            <a href="../../works.html" class="btn btn-primary">View All Works</a>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 3D Artist Portfolio. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        let scene, camera, renderer, controls;
        let currentModel = null;
        let lights = [];
        let gridHelper;
        let textureMode = 'on';
        let originalMaterials = new Map();

        function init() {
            try {
                // Check if container exists
                const container = document.getElementById('canvas-container');
                if (!container) {
                    console.error('Canvas container not found');
                    return;
                }

                // Scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x0a0a0a);

                // Camera
                const containerWidth = container.clientWidth || 800;
                const containerHeight = container.clientHeight || 700;
                camera = new THREE.PerspectiveCamera(
                    45,
                    containerWidth / containerHeight,
                    0.1,
                    1000
                );
                camera.position.set(5, 3, 5);

                // Renderer - Optimized for performance
                renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    powerPreference: "high-performance",
                    alpha: false
                });
                renderer.setSize(containerWidth, containerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Reduced for performance
                renderer.shadowMap.enabled = false; // Disabled for better performance
                renderer.toneMapping = THREE.ACESFilmicToneMapping;
                renderer.toneMappingExposure = 1.0;
                renderer.outputEncoding = THREE.sRGBEncoding;
                container.appendChild(renderer.domElement);

                // Controls
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.08;
                controls.screenSpacePanning = true;
                controls.rotateSpeed = 0.7;
                controls.panSpeed = 0.8;
                controls.zoomSpeed = 1.0;
                controls.minDistance = 0.5;
                controls.maxDistance = 100;

                // Lighting
                setupLighting();

                // Grid (hidden by default)
                gridHelper = new THREE.GridHelper(10, 10, 0x444444, 0x222222);
                gridHelper.visible = false;
                scene.add(gridHelper);

                // Event listeners
                window.addEventListener('resize', onWindowResize);

                // Control buttons
                document.getElementById('texture-btn').addEventListener('click', toggleTexture);

                // Load model
                loadModel();

                // Animation loop
                animate();
            } catch (error) {
                console.error('Error initializing 3D viewer:', error);
                const loading = document.getElementById('loading');
                if (loading) {
                    loading.innerHTML = '<p style="color: #ff4444;">Error loading 3D viewer. Please refresh the page.</p>';
                    loading.style.display = 'block';
                }
            }
        }

        function setupLighting() {
            const keyLight = new THREE.DirectionalLight(0xffffff, 1.2);
            keyLight.position.set(5, 8, 5);
            scene.add(keyLight);
            lights.push(keyLight);

            const fillLight = new THREE.DirectionalLight(0xffffff, 0.5);
            fillLight.position.set(-5, 3, -3);
            scene.add(fillLight);
            lights.push(fillLight);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Increased for better visibility
            scene.add(ambientLight);
            lights.push(ambientLight);
        }

        function loadModel() {
            document.getElementById('loading').style.display = 'block';
            const loader = new THREE.GLTFLoader();

            loader.load(
                '../../models/headTest.glb',
                function(gltf) {
                    currentModel = gltf.scene;

                    currentModel.traverse((child) => {
                        if (child.isMesh) {
                            if (Array.isArray(child.material)) {
                                const clonedMaterials = child.material.map(mat => mat.clone());
                                originalMaterials.set(child, clonedMaterials);
                            } else {
                                originalMaterials.set(child, child.material.clone());
                            }

                            const materials = Array.isArray(child.material) ? child.material : [child.material];
                            materials.forEach(mat => {
                                if (mat.isMeshStandardMaterial || mat.isMeshPhysicalMaterial) {
                                    if (mat.map) {
                                        mat.map.encoding = THREE.sRGBEncoding;
                                        mat.map.needsUpdate = true;
                                    }
                                    mat.envMapIntensity = 1.0;
                                    mat.needsUpdate = true;
                                }
                            });

                            // Shadows disabled for better performance
                            child.castShadow = false;
                            child.receiveShadow = false;
                        }
                    });

                    scene.add(currentModel);

                    // Center and scale
                    const box = new THREE.Box3().setFromObject(currentModel);
                    const center = box.getCenter(new THREE.Vector3());
                    const size = box.getSize(new THREE.Vector3());
                    const maxDim = Math.max(size.x, size.y, size.z);
                    const scale = 4 / maxDim;

                    currentModel.scale.multiplyScalar(scale);
                    currentModel.position.sub(center.multiplyScalar(scale));

                    frameModel();
                    document.getElementById('loading').style.display = 'none';
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Error loading model:', error);
                    document.getElementById('loading').style.display = 'none';
                }
            );
        }

        function frameModel() {
            if (!currentModel) return;
            const box = new THREE.Box3().setFromObject(currentModel);
            const center = box.getCenter(new THREE.Vector3());
            const size = box.getSize(new THREE.Vector3());
            const maxDim = Math.max(size.x, size.y, size.z);
            const distance = maxDim * 2.5;
            const direction = camera.position.clone().sub(center).normalize();
            camera.position.copy(center).add(direction.multiplyScalar(distance));
            controls.target.copy(center);
            controls.update();
        }

        function toggleTexture() {
            if (!currentModel) return;
            textureMode = textureMode === 'on' ? 'off' : 'on';

            currentModel.traverse((child) => {
                if (child.isMesh) {
                    if (textureMode === 'off') {
                        const grayMaterial = new THREE.MeshStandardMaterial({
                            color: 0x808080,
                            roughness: 0.6,
                            metalness: 0.0
                        });
                        if (Array.isArray(child.material)) {
                            child.material = child.material.map(() => grayMaterial.clone());
                        } else {
                            child.material = grayMaterial;
                        }
                    } else {
                        const original = originalMaterials.get(child);
                        if (original) {
                            if (Array.isArray(original)) {
                                child.material = original.map(mat => mat.clone());
                            } else {
                                child.material = original.clone();
                            }
                        }
                    }
                }
            });

            document.getElementById('texture-btn').classList.toggle('active', textureMode === 'off');
        }

        function onWindowResize() {
            const container = document.getElementById('canvas-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
    <script src="../../mobile-menu.js"></script>
</body>
</html>
